# Herzel2022_RNAdemographics
This repository complements the manuscript "Ubiquitous mRNA decay fragments in E. coli redefine the functional transcriptome".

The scripts outline processing and mapping of 3' end sequencing data to the E. coli genome and reference RNAs (spike-ins/SI) as described in the methods section of the manuscript and also below:

3‘ end-seq processing and mapping:
In analogy to Rend-seq, 3’ end linker sequences were trimmed. To deal with non-template addition during reverse transcription, all reads were further trimmed with the fastx_trimmer of the fastxtoolkit/0.0.13 by 1 nt at their 5’end and only reads of 15 nt length or longer were kept for mapping with bowtie/1.2 using the options -v 0 -k 1 (41). For further data analysis mapped data were transformed into bam-format and bedgraph-format using samtools/1.5 and bedtools/2.25.0 (29, 42). Coverage data include only 3’ terminal single nucleotide counts per read. To identify 3’ adenylated transcript ends, the unmapped reads were trimmed using cutadapt/1.16 (43). First, 3’ terminal CCAs were removed with the following settings: -a "CCA$" --minimum-length 15 -O 3 --trimmed-only. This step is necessary to avoid confusing CCA-tails, e.g. at tRNA 3’ ends with 3’ end adenylation that arise through different mechanisms in vivo (44). Second, A-tails of any length were trimmed (-a "A{38}" --minimum-length 15 -O 1 --trimmed-only). These trimmed reads were mapped and further converted with the same settings and code as untrimmed reads above. For total RNA 3’ end analysis mapped trimmed (i.e. A-tailed) and untrimmed 3’ end coverage profiles were summed. 

Reference RNA mapping:
Unmapped reads after mapping 3’ end-sequencing to the E. coli genome (described above) were mapped with the same settings and code as above, but to the five reference RNA template sequences (Supplementary Table S2). In most cases T7 RNA polymerase adds a few non-templated nucleotides at the 3’ end of the template (45). To include these 3’ ends for full-length RNA analysis, unmapped reads after mapping to the reference RNA template were five times iteratively trimmed by 1 nt, filtered for length to only include reads of 15 nt length or longer (fastx_trimmer -Q 33 -t 1 -m 15) and remapped to the template. After trimming 5 nt only background mapping was observed and thus trimming was stopped. Trimmed mapped reads and reads that mapped to the reference RNA template prior trimming were merged and converted to bedgraph files using sam- and bedtools. 
